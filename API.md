# Описание API
Здесь описано всё API, используемое в приложении, с описанием структур данных


**Содержание**
1. Общее
    * 1.1. Адрес сервера
    * 1.2. Используемый протокол
2. Структуры данных
    * 2.1. Общий формат ответа
    * 2.2. Пользователь
    * 2.3. Сообщение
3. Список запросов
    * 3.1. Общие ошибки
4. Подробно
    * 4.1. login
    * 4.2. logout
    * 4.3. registration
    * 4.4. math



## 1. Общее
### 1.1. Адрес сервера
`http://knightwars.local/api`
`http://udsu:knightwars:81/api`

### 1.2. Используемый протокол
API полностью реализовано на http(s). 

Формат возвращаемых значений `JSON`.

Все методы, если это особо не оговорено, имеют тип `GET`.


## 2. Структуры данных
### 2.1. Общий формат ответа
T — какие-то данные. В случае успешного ответа возвращается result = 'ok' и поле data с данными.

В случае ошибки возвращается result = 'error' и поле error с кодом и текстом ошибки
```
Answer<T>: {
    result: 'ok' | 'error';
    data?: T;
    error?: {
        code: number;
        text: string;
    };
}
```

### 2.2. Пользователь
```
User: {
    id: number;
    nickname: string;
    token: string;
}
```

### 2.3. Математика
```
MathResult: number[];
```


## 3. Список запросов
| Название | О чем |
| - | - |
| login | Авторизация пользователя |
| logout | Логаут пользователя |
| registration | Регистрация пользователя |
| math | Решение уравнения (1–4 степени)т |


### 3.1. Общие ошибки
* `101` - параметр method не передан
* `102` - метод не найден
* `242` - не переданы все необходимые параметры
* `705` - пользователь не найден / не авторизован
* `1001` - логин уже существует
* `1002` - неверный логин или пароль
* `1003` - ошибка выхода из системы
* `1004` - ошибка регистрации пользователя
* `1005` - пользователь не существует
* `8001` - не передан ни один коэффициент
* `8002` - дискриминант < 0 (нет действительных корней)
* `8003` - нет действительных корней
* `9000` - неизвестная ошибка


## 4. Подробно
### 4.1. login
Авторизация пользователя в системе

**Параметры**
```
{
    "login": "string", - логин пользователя 
    "password": "string" - пароль пользователя
}

```
**Успешный ответ**
```
    Answer<User>
```
**Ошибки**
* `242` - не переданы все необходимые параметры
* `1002` - неверный пароль
* `1005` - пользователь не существует


### 4.2. logout
Вылогин пользователя из системы

**Параметры**
```
{
    token: string
}
```
**Успешный ответ**
```
    Answer<true>
```
**Ошибки**
* `242` - не передан токен
* `705` - пользователь не найден | не авторизован
* `1003` - ошибка выхода из системы


### 4.3. registration
Зарегистрировать нового ползователя

**Параметры**
```
{
    "login": "string", - логин пользователя 
    "password": "string" - пароль пользователя
    "nickname": "string", - имя пользователя
    "email": "string" - почта пользователя 
}
```
**Успешный ответ**
```
    Answer<User>
```
**Ошибки**
* `242` - не переданы все необходимые параметры
* `1001` - такой логин уже существует
* `1004` - ошибка при регистрации пользователя


### 4.4. math
Решение уравнений 1–4 степени

**Параметры**
```
{
    "a": number, - коэффициент при x^4
    "b": number, - коэффициент при x^3
    "c": number, - коэффициент при x^2
    "d": number, - коэффициент при x
    "e": number  - свободный член
}
```
**Успешный ответ**
```
    Answer<MathResult>
```
**Ошибки**
* `8001` - не передан ни один коэффициент
* `8002` - дискриминант < 0 (нет действительных корней)
* `8003` - нет действительных корней
